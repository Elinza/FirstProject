#include <sys/time.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <stdio.h>
#include <sys/time.h>

#define TIME_LEN 64



int main()
{
   time_t t;
   struct timeval tv;
   struct tm *tm;
   char buf[TIME_LEN];
   int usec = 0;
   gettimeofday(&tv, NULL);
   usec = tv.tv_usec / 1000;
   time(&t);
   tm = localtime(&t);

   strftime(buf, TIME_LEN, "%F %T", tm);

   printf("unix time :%ld,local time is%s.%d\n", tv.tv_sec, buf, usec);

   return 0;
}

